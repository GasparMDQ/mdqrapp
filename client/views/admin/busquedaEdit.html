<template name="busquedaEdit">
  <div class="container">
    <div id="evento-header">
      {{> busquedaData}}
    </div>

    <div class="row">
      <p>
        Some text here?
      </p>
    </div>

    <div class="row" id="alert-container">
    </div>    

    <div class="row">
      <p>
        <div class="make-switch js-event-active-switch" data-on="success" data-off="danger" data-on-label="SI" data-off-label="NO">
          <input type="checkbox" checked={{ busqueda.active }}>
        </div> Búsqueda Activa
      </p>
      <p>
        <div class="make-switch js-event-live-switch" data-on="success" data-off="danger" data-on-label="SI" data-off-label="NO">
          <input type="checkbox" checked={{ busqueda.live }}>
        </div> Búsqueda en Progreso
      </p>
    </div>
  </div>

  <div class="form-no-label">

    <div class="well">
      {{> busquedaRutasList}}
    </div>

    <div class="well">
      {{> busquedaNodosList}}
    </div>

    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <a class="btn btn-warning pull-right" href="{{pathFor 'busquedaList'}}">Volver</a>
        </div>
      </div>
    </div>
  </div>

</template>

<template name="busquedaData">
  <div class="row">
    <div class="col-sm-4">
      <h3>{{ busqueda.id }}</h3>
    </div>
    <div class="col-sm-4 col-sm-offset-4">
      <h3 class="hidden-sm hidden-xs"></h3>
      {{ formatDate busqueda.date "short"}}
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <div class="alert alert-info">{{ evento.description}}</div>
    </div>
  </div>
</template>

<template name="busquedaNodosList">
  <h3>Preguntas</h3>
  {{#if hasNodos}}
    <div class="panel-group" id="edit-nodo-accordion">
      {{#each nodos}}
        {{> nodoEdit}}
      {{/each}}
    </div>
  {{else}}
    <div class="alert alert-danger">
      <p>No hay preguntas cargadas</p>
    </div>
  {{/if}}
  <div class="panel-group" id="new-nodo-accordion">
    <div class="panel panel-default">
      <div class="panel-heading bg-primary" data-toggle="collapse" data-parent="#new-nodo-accordion" data-target="#new-nodo-form">
        <h4 class="panel-title">
          Nueva Pregunta
        </h4>
      </div>
      <div id="new-nodo-form" class="panel-collapse collapse">
        <div class="panel-body">
          {{> nodoNew}}
        </div>
      </div>
    </div>
  </div>
</template>

<template name="nodoNew">
  <div class="js-nodo alert alert-info" role="form">
    <div class="form-group">
      <input id="nodoId" type="text" class="form-control" placeholder="Ingrese el identificador del sobre">
      <input id="nodoQuestion" type="text" class="form-control" placeholder="Ingrese la pregunta">
    </div>
    <div class="form-group">
      <input id="nodoAnswer" type="number" class="form-control" placeholder="Ingrese la respuesta">
      <input id="nodoLowOffset" min="0" type="number" class="form-control" placeholder="Ingrese el margen inferior">
      <input id="nodoHighOffset" min="0" type="number" class="form-control" placeholder="Ingrese el margen superior">
    </div>
    <div class="form-group">
      <input id="nodoLatitude" type="text" class="form-control" placeholder="Latitud">
      <input id="nodoLongitude" type="text" class="form-control" placeholder="Longitud">
    </div>
    <button type="button" class="btn btn-success btn-sm js-add-nodo">
      <span class="glyphicon glyphicon-plus"></span>
    </button>
  </div>
</template>

<template name="nodoEdit">
    <div class="panel panel-default">
      <div class="panel-heading bg-info" data-toggle="collapse" data-target="#edit-nodo-form-{{this._id}}">
        <h4 class="panel-title">
          {{ this.id }}
        </h4>
      </div>
      <div id="edit-nodo-form-{{this._id}}" class="panel-collapse collapse">
        <div class="panel-body">
          <div class="js-nodo" data-nodo="{{this._id}}">
            <div class="row">
              <div class="col-sm-6">
                <form class="form-horizontal">
                  <div class="form-group">
                    <label class="control-label col-sm-4">Id</label>
                    <div class="col-sm-8">
                      <input type="text" class="form-control js-nodo-id" placeholder="Ingrese el identificador" value="{{ this.id }}">
                    </div>
                    <label class="control-label col-sm-4">Pregunta</label>
                    <div class="col-sm-8">
                      <textarea rows="3" class="form-control js-nodo-question" placeholder="Ingrese la pregunta" >{{ this.question }}</textarea>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-4">Respuesta</label>
                    <div class="col-sm-8">
                      <input type="number" class="form-control js-nodo-answer" placeholder="Ingrese la respuesta" value="{{ this.answer }}">
                    </div>
                    <label class="control-label col-sm-4">Margen inferior</label>
                    <div class="col-sm-8">
                      <input type="number" class="form-control js-nodo-lowOffset" placeholder="Ingrese el margen inferior" min="0" value="{{ this.lowOffset }}">
                    </div>
                    <label class="control-label col-sm-4">Margen Superior</label>
                    <div class="col-sm-8">
                      <input type="number" class="form-control js-nodo-highOffset" placeholder="Ingrese el margen superior" min="0" value="{{ this.highOffset }}">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-4">Latitud</label>
                    <div class="col-sm-8">
                      <input type="text" class="form-control js-nodo-latitude" placeholder="Latitud (90 a -90)" value="{{ this.latitude }}">
                    </div>
                    <label class="control-label col-sm-4">Longitud</label>
                    <div class="col-sm-8">
                      <input type="text" class="form-control js-nodo-longitude" placeholder="Longitud (180 a -180)" value="{{ this.longitude }}">
                    </div>
                  </div>
                </form>
              </div>
              <div class="col-sm-6">
                <img src="{{ mapUrl }}" class="img-responsive img-thumbnail">
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <button type="button" class="btn btn-warning btn-sm js-update-nodo">
                  <span class="glyphicon glyphicon-save"></span>
                </button>
                <button type="button" class="btn btn-danger btn-sm js-remove-nodo">
                  <span class="glyphicon glyphicon-minus"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

</template>

<template name="busquedaRutasList">
  <h3>Rutas</h3>
  {{#if hasRoutes}}
    {{#each routes}}
      {{> routeEdit}}
    {{/each}}
  {{else}}
    <div class="alert alert-danger">
      <p>No hay rutas cargadas</p>
    </div>
  {{/if}}
  {{> routeNew}}
</template>

<template name="routeNew">
  <div class="js-route alert alert-info">
    <div class="form-group">
      <input id="routeId" type="text" class="form-control" placeholder="Ingrese el identificador">
    </div>
    <div class="form-group">
      <input id="routeDesc" type="text" class="form-control" placeholder="Ingrese la descripcion">
    </div>
    <div class="form-group">
      <input id="routeQty" type="number" class="form-control" placeholder="Ingrese el cupo" min="1">
    </div>
    <button type="button" class="btn btn-success btn-sm js-add-route">
      <span class="glyphicon glyphicon-plus"></span>
    </button>
  </div>
</template>

<template name="routeEdit">
  <div class="js-route alert" data-route="{{this._id}}">
    <div class="form-group">
      <input type="text" class="form-control js-route-id" placeholder="Ingrese el identificador" value="{{ this.id }}">
    </div>
    <div class="form-group">
      <input type="text" class="form-control js-route-desc" placeholder="Ingrese la descripcion" value="{{ this.descripcion }}">
    </div>
    <div class="form-group">
      <input type="number" class="form-control js-route-qty" placeholder="Ingrese el cupo" min="1" value="{{ this.cupo }}">
    </div>
    <button type="button" class="btn btn-warning btn-sm js-update-route">
      <span class="glyphicon glyphicon-save"></span>
    </button>
    <button type="button" class="btn btn-danger btn-sm js-remove-route">
      <span class="glyphicon glyphicon-minus"></span>
    </button>
  </div>
</template>
